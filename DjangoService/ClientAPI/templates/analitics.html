<head>
    <meta charset="UTF-8">
    <title>Смета</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'analitics.css' %}">
    <link rel="stylesheet" href="{% static 'x.scss' %}">
    <link rel="shortcut icon" href="#" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
    <header>
        <h2 class="f2">Winter Restaurant 2023</h2>
        <nav>
            <a href="waiter">Прием</a>
            <a href="kitchen">Кухня</a>
            <a href="order">Заказы</a>
            <a href="analitic">Смета</a>
            <div class="animation start-home"></div>
        </nav>
    </header>
<script>
function isDownload() {
    $.ajax({
        url: 'download_excel/',  // Укажите URL вашего представления для загрузки файла
        type: 'GET',
        success: function(response) {
            if ('error' in response) {
                console.error('Ошибка при загрузке файла:', response.error);
            } else {
                // Создаем ссылку для скачивания
                var downloadLink = document.createElement('a');
                downloadLink.href = response.file_path;
                downloadLink.download = 'orders_report.xlsx';

                // Добавляем ссылку в DOM и автоматически щелкаем по ней
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            }
        },
        error: function(error) {
            console.error('Ошибка при загрузке файла:', error);
            // Обработайте ошибку по своему усмотрению
        }
    });
}
</script>
<button class="btn-download" id="btn-auto-click" onclick="isDownload()">
   <div class="arrow"></div>
</button>
 <h3 class="downloand">Загрузить сессию</h3>
</body>